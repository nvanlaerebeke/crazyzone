qbittorrent:
  ingress:
    main:
      enabled: true
      ingressClassName: traefik
      hosts:
        - host: torrent.crazyzone.be
          paths:
            - path: /
              pathType: Prefix
              service:
                name: main
                port: http
      tls:
        - hosts: [torrent.crazyzone.be]
          secretName: crazyzone-be-tls
  persistence:
    config:
      enabled: true
      mountPath: "/config"
      accessModes: ReadWriteOnce
      size: 5Gi
    data:
      enabled: true
      type: nfs
      server: "nas.crazyzone.be"
      path: "/volume1/docker-storage/torrent/downloads"
      mountPath: "/downloads"
  service:
    enabled: true
    main:
      # WebUI is behind Ingress; leave ClusterIP
      type: ClusterIP
      ports:
        http:
          port: 8080
    bittorrent:
      # Expose a fixed listening port for better DHT/peer connectivity
      type: LoadBalancer          # or NodePort if you prefer
      # loadBalancerIP: <optional-static-ip>
      ports:
        tcp:
          port: 6881
          targetPort: 6881
          protocol: TCP
        udp:
          port: 6881
          targetPort: 6881
          protocol: UDP
  # --- Pod & container settings
  workload:
    enabled: true
    main:
      podSpec:
        containers:
          main:
            env:
              TZ: "Europe/Brussels"
              # Match the service port you opened above; then disable “random” port in the UI
              QBITTORRENT__BT_PORT: "6881"   # (If not honored, set in WebUI > Advanced)
            securityContext:
              runAsUser: 568
              runAsGroup: 568
              readOnlyRootFilesystem: true
              allowPrivilegeEscalation: false